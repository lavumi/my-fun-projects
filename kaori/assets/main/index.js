window.__require=function t(e,o,n){function i(c,a){if(!o[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var h="function"==typeof __require&&__require;if(!a&&h)return h(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var l=o[c]={exports:{}};e[c][0].call(l.exports,function(t){return i(e[c][1][t]||t)},l,l.exports,t,e,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({GameManager:[function(t,e,o){"use strict";cc._RF.push(e,"63d72N6Lu5CBZq3bcZPjCc1","GameManager");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r,c=t("./GameUIController"),a=t("./ScoreUIController"),s=t("./Monster"),h=t("./Player"),l=t("./SoundController"),u=cc._decorator,_=u.ccclass,p=u.property;(function(t){t[t.LEFT=-1]="LEFT",t[t.RIGHT=1]="RIGHT"})(r||(r={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._soundController=null,e.feverFinishDelay=.3,e.gameRestartDelay=1,e.actionInterval=.1,e._menuUI=null,e._btnDiff=[],e._gameUI=null,e._scoreUI=null,e._monsterDistance=64,e._difficulty=0,e._score=0,e._fever=0,e._comboCount=0,e._maxCombo=0,e._timeCount=30,e._maxTimeCount=30,e._feverPerScore=99,e._insaneTimer=.2,e._feverMode=!1,e._blockInput=!0,e._blockInputFeverFinish=!0,e.player=null,e.monsterPrefab=null,e._monsterDirectionArray=[],e._monsterArr=[],e._monsterCount=4,e}return n(e,t),e.prototype.onLoad=function(){this.initMenu(),this._gameUI=cc.find("GameUI").getComponent(c.default),this._scoreUI=cc.find("ScoreUI").getComponent(a.default),this._soundController=cc.find("SoundController").getComponent(l.default),this.player=cc.find("Player",this.node).getComponent(h.default)},e.prototype.start=function(){this.showMain()},e.prototype.initMenu=function(){this._menuUI=cc.find("MenuUI"),this._menuUI.active=!0,cc.find("lbEasy",this._menuUI).on("click",this.startGame.bind(this,0),this),cc.find("lbHard",this._menuUI).on("click",this.startGame.bind(this,1),this),cc.find("lbHell",this._menuUI).on("click",this.startGame.bind(this,2),this),cc.find("lbInsane",this._menuUI).on("click",this.startGame.bind(this,3),this)},e.prototype.showMain=function(){this.resetGame(),this._gameUI.node.active=!1,this._menuUI.active=!0,this._scoreUI.node.active=!1,this._soundController.playMusic(0,!0)},e.prototype.showResult=function(){this._gameUI.node.active=!1,this._menuUI.active=!1,this._scoreUI.node.active=!0,this._scoreUI.showResult(this._score,this._maxCombo)},e.prototype.restartGame=function(){this.resetGame(),this.startGame(this._difficulty)},e.prototype.startGame=function(t){var e=this;this._soundController.playMusic(1,!0);var o=Number(window.actionIntervalTestValue);this.actionInterval!==o&&!1===isNaN(o)&&(this.actionInterval=o),this._gameUI.node.active=!0,this._menuUI.active=!1,this._scoreUI.node.active=!1,this._difficulty=t,this._gameUI.initializeGame(),this._gameUI.updateFever(this._fever),this._gameUI.updateRemainTime(this._timeCount/this._maxTimeCount),this._gameUI.updateScore(this._score),this._gameUI.updateCombo(this._comboCount);for(var n=0;n<this._monsterCount;n++)this.makeNewMonster();this._gameUI.startCountDown(1,function(){e._blockInput=!1,e._blockInputFeverFinish=!1,e.schedule(e._updateTimeCount)})},e.prototype.resetGame=function(){this._score=0,this._fever=0,this._timeCount=this._maxTimeCount,this._feverPerScore=10,this._comboCount=0,this._maxCombo=0,this._monsterDirectionArray.length=0,this._monsterArr.forEach(function(t){t.node.removeFromParent()}),this._monsterArr.length=0},e.prototype._updateTimeCount=function(t){this._timeCount-=t,this._gameUI.updateRemainTime(this._timeCount/this._maxTimeCount),this._timeCount<=0&&this.gameOver()},e.prototype.leftAction=function(){!0!==this._blockInput&&!0!==this._blockInputFeverFinish&&(this._feverMode&&this._monsterDirectionArray[0]===r.LEFT?(this.player.leftAction(),this.attackMonster()):this._feverMode&&this._monsterDirectionArray[0]===r.RIGHT?(this.player.rightAction(),this.attackMonster()):this._monsterDirectionArray[0]===r.LEFT?(this.player.leftAction(),this.attackMonster()):(this.player.leftAction(),this.playerDamaged()))},e.prototype.rightAction=function(){!0!==this._blockInput&&!0!==this._blockInputFeverFinish&&(this._feverMode&&this._monsterDirectionArray[0]===r.LEFT?(this.player.leftAction(),this.attackMonster()):this._feverMode&&this._monsterDirectionArray[0]===r.RIGHT?(this.player.rightAction(),this.attackMonster()):this._monsterDirectionArray[0]===r.RIGHT||this._feverMode?(this.player.rightAction(),this.attackMonster()):(this.player.rightAction(),this.playerDamaged()))},e.prototype.attackMonster=function(){this._soundController.playEffect(3),0!==this._monsterArr.length&&(this._monsterArr[0].damaged(this._feverMode)&&(this._monsterDirectionArray.splice(0,1),this._monsterArr.splice(0,1),this.moveToCenter(),this.makeNewMonster(),this.score(),this.addFever(),this.setInsaneTimer()),this._maxCombo=this._maxCombo>this._comboCount?this._maxCombo:this._comboCount,this._gameUI.updateCombo(this._comboCount++))},e.prototype.moveToCenter=function(){for(var t=0;t<this._monsterDirectionArray.length;t++){var e=cc.v2((t+1)*this._monsterDistance*this._monsterDirectionArray[t],0);cc.tween(this._monsterArr[t].node).to(this.actionInterval,{position:e}).start()}},e.prototype.makeNewMonster=function(){var t=Math.floor(2*Math.random());0===t&&(t=-1),this._monsterDirectionArray.push(t);var e=this._monsterDirectionArray.length,o=cc.instantiate(this.monsterPrefab),n=cc.v2(e*this._monsterDistance*t,0);o.setPosition(6*this._monsterDistance*t,0),cc.tween(o).to(.3,{position:n}).start(),this.node.addChild(o),this._monsterArr.push(o.getComponent(s.default)),o.getComponent(s.default).init(t===r.LEFT,this._difficulty)},e.prototype.setInsaneTimer=function(){3===this._difficulty&&this._monsterArr[0].startInsaneTimer()},e.prototype.score=function(){this._score++,this._gameUI.updateScore(this._score)},e.prototype.addFever=function(){!0!==this._feverMode&&(this._fever+=1/this._feverPerScore,this._gameUI.updateFever(this._fever),this._fever>=1&&this.feverOn())},e.prototype.feverOn=function(){this._feverMode=!0,this._gameUI.setFeverMode(),this.unschedule(this._updateTimeCount),this.schedule(this._updateFever)},e.prototype.playerDamaged=function(){this._soundController.playEffect(2),this.player.damaged(this._monsterDirectionArray[0]===r.LEFT),this._timeCount-=5,this._comboCount=0,this._gameUI.updateCombo(this._comboCount)},e.prototype.gameOver=function(){var t=this;this._blockInputFeverFinish=!0,this._blockInput=!0,this._monsterArr[0].pauseTimer(),this._gameUI.gameOver(),this.unschedule(this._updateTimeCount),this.unschedule(this._updateFever),setTimeout(function(){t.showResult()},1500)},e.prototype._updateFever=function(t){this._fever-=.4*t,this._gameUI.updateFever(this._fever),this._fever<=0&&(this.unschedule(this._updateFever),this.finishFever())},e.prototype.finishFever=function(){var t=this;cc.log("fever finished","block inpug"),this._feverMode=!1,this._blockInputFeverFinish=!0,this._monsterArr.forEach(function(t){t.damaged(!0)}),this._monsterDirectionArray.length=0,this._monsterArr.length=0,this._gameUI.finishFeverMode(this.feverFinishDelay,this.gameRestartDelay),cc.tween(this.node).delay(this.feverFinishDelay).call(function(){for(var e=0;e<t._monsterCount;e++)t.makeNewMonster()}).delay(this.gameRestartDelay).call(function(){t.schedule(t._updateTimeCount),t._blockInputFeverFinish=!1,t.setInsaneTimer()}).start()},e.prototype.runCheat=function(){0!==this._monsterDirectionArray.length&&(this._monsterDirectionArray[0]===r.LEFT?this.leftAction():this.rightAction())},i([p(cc.Prefab)],e.prototype,"monsterPrefab",void 0),e=i([_],e)}(cc.Component);o.default=f,cc._RF.pop()},{"./GameUIController":"GameUIController","./Monster":"Monster","./Player":"Player","./ScoreUIController":"ScoreUIController","./SoundController":"SoundController"}],GameUIController:[function(t,e,o){"use strict";cc._RF.push(e,"9a3c2iy99NH56d1j9pre9+h","GameUIController");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./GameManager"),c=cc._decorator,a=c.ccclass,s=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._gameManager=null,e._gameUI=null,e._lbScore=null,e._lbGameOver=null,e._btnMain=null,e._lbReady=null,e._lbGo=null,e._lbFever=null,e._lbFeverFinish=null,e._feverGauge=null,e._progTime=null,e._heartContainer=null,e._lbCombo=null,e.heartPrefab=null,e}return n(e,t),e.prototype.onLoad=function(){this._gameManager=cc.find("GameManager").getComponent(r.default),this._gameUI=this.node,this._lbScore=cc.find("lbScore",this._gameUI).getComponent(cc.Label),this._lbGameOver=cc.find("lbGameOver",this._gameUI),this._lbReady=cc.find("lbReady",this._gameUI),this._lbGo=cc.find("lbGo",this._gameUI),this._lbFever=cc.find("lbFever",this._gameUI),this._feverGauge=cc.find("PlayerStatus/feverGauge",this._gameUI).getComponent(cc.ProgressBar),this._progTime=cc.find("gameTimer",this._gameUI).getComponent(cc.ProgressBar),this._btnMain=cc.find("lbGameOver/btnMain",this._gameUI),this._lbFeverFinish=cc.find("lbFeverFinish",this._gameUI),this._lbCombo=cc.find("comboUI/lbCombo",this._gameUI).getComponent(cc.Label),this._heartContainer=cc.find("PlayerStatus/heartContainer",this._gameUI),this._lbScore.node.active=!0,this._progTime.node.active=!0,this._lbGameOver.active=!1,this._lbFever.active=!1,this._lbGo.active=!1,this._lbReady.active=!1,this._feverGauge.node.active=!0},e.prototype.initializeGame=function(){this._lbScore.node.active=!0,this._progTime.node.active=!0,this._lbGameOver.active=!1,this._lbFever.active=!1,this._lbFeverFinish.active=!1,this._lbGo.active=!1,this._lbReady.active=!1,this._feverGauge.node.active=!0,this._heartContainer.active=!1},e.prototype.startCountDown=function(t,e){var o=this;cc.tween(this.node).call(function(){o._lbReady.active=!0}).delay(t).call(function(){o._lbReady.active=!1,o._lbGo.active=!0,e()}).delay(.4).call(function(){o._lbGo.active=!1}).start()},e.prototype.updateHealth=function(t){t<0&&cc.warn("health below 0 ",t);for(var e=0;e<this._heartContainer.children.length;e++)this._heartContainer.children[e].active=e<t},e.prototype.updateRemainTime=function(t){this._progTime.progress=t},e.prototype.updateScore=function(t){this._lbScore.string=t+""},e.prototype.updateFever=function(t){this._feverGauge.progress=t},e.prototype.setFeverMode=function(){this._lbFever.active=!0,this._lbFever.opacity=255},e.prototype.finishFeverMode=function(t,e){var o=this;this._lbFeverFinish.active=!0,cc.tween(this._lbFever).to(t,{opacity:0}).delay(e).call(function(){o._lbFeverFinish.active=!1}).start()},e.prototype.gameOver=function(){this._lbGameOver.active=!0},e.prototype.updateCombo=function(t){this._lbCombo.node.parent.active=0!==t,this._lbCombo.string=t.toString()},i([s(cc.Prefab)],e.prototype,"heartPrefab",void 0),e=i([a],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./GameManager":"GameManager"}],InputManager:[function(t,e,o){"use strict";cc._RF.push(e,"ed9110pmEVNjpdiSE4F2dRP","InputManager");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,a=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._pressA=!1,e._pressB=!1,e.gameMamager=null,e._leftPanel=null,e._rightPanel=null,e._inputDelay=5,e._blockInput=!1,e}return n(e,t),e.prototype.onLoad=function(){this.gameMamager=this.getComponent("GameManager"),this._leftPanel=cc.find("InputPanelLeft"),this._rightPanel=cc.find("InputPanelRight")},e.prototype.start=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this._leftPanel.on("click",this.gameMamager.leftAction,this.gameMamager),this._rightPanel.on("click",this.gameMamager.rightAction,this.gameMamager)},e.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.onKeyDown=function(t){if(!0!==this._blockInput)switch(t.keyCode){case cc.macro.KEY.left:!1===this._pressA&&this.gameMamager.leftAction(),this._pressA=!0,this.blockInput();break;case cc.macro.KEY.right:!1===this._pressB&&this.gameMamager.rightAction(),this._pressB=!0,this.blockInput()}},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.left:this._pressA=!1;break;case cc.macro.KEY.right:this._pressB=!1}},e.prototype.blockInput=function(){var t=this;this._blockInput=!0,cc.tween(this.node).delay(this.gameMamager.actionInterval).call(function(){t._blockInput=!1}).start()},e=i([c],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],LocalStorage:[function(t,e,o){"use strict";cc._RF.push(e,"97440JEIjBCiIg1jRzL72Vu","LocalStorage");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,a=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return n(e,t),e.prototype.start=function(){},i([a(cc.Label)],e.prototype,"label",void 0),i([a],e.prototype,"text",void 0),e=i([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],MenuUIController:[function(t,e,o){"use strict";cc._RF.push(e,"67b1ahLu/RIK61zKAZCKmir","MenuUIController");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,a=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e=i([c],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],Monster:[function(t,e,o){"use strict";cc._RF.push(e,"c466cyFnN5JiYq4HvWvxS7j","Monster");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./GameManager"),c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.colorArr=[cc.color(255,255,255),cc.color(171,251,255),cc.color(255,171,1)],e.health=1,e.hp=[],e._atkTimer=null,e.gameManager=null,e._characterNode=null,e._animation=null,e._atkTimerCur=99,e._atkTimerBase=.5,e}return n(e,t),e.prototype.onLoad=function(){this._atkTimer=cc.find("atkTimer",this.node).getComponent(cc.ProgressBar),this._atkTimer.node.active=!1,this._characterNode=cc.find("CharacterNode",this.node),this.gameManager=cc.find("GameManager").getComponent(r.default),this._animation=this._characterNode.getComponent(cc.Animation),this._animation.on("finished",this.onAnimFinishedCallback,this)},e.prototype.init=function(t,e){var o=0===e?2:3,n=Math.floor(Math.random()*o)+1;t&&(this.node.scaleX=-1);var i=cc.find("HealthContainer",this.node);this.hp.push(i.children[0]),this.hp.push(i.children[1]),this.hp.push(i.children[2]),1===n?(this._characterNode.color=this.colorArr[0],this.hp[0].color=this.colorArr[0],this.hp[1].color=this.colorArr[0],this.hp[2].color=this.colorArr[0],this.hp[0].active=!0,this.hp[1].active=!1,this.hp[2].active=!1):2===n?(this._characterNode.color=this.colorArr[1],this.hp[0].color=this.colorArr[1],this.hp[1].color=this.colorArr[1],this.hp[2].color=this.colorArr[1],this.hp[0].active=!0,this.hp[1].active=!0,this.hp[2].active=!1):3===n&&(this._characterNode.color=this.colorArr[2],this.hp[0].color=this.colorArr[2],this.hp[1].color=this.colorArr[2],this.hp[2].color=this.colorArr[2],this.hp[0].active=!0,this.hp[1].active=!0,this.hp[2].active=!0),e>=2&&(this.hp[0].active=!1,this.hp[1].active=!1,this.hp[2].active=!1),this.health=n,this._animation.play("monsterIdle")},e.prototype.damaged=function(t){var e=this;return this.health--,this.hp[this.health].active=!1,this._atkTimerCur=this._atkTimerBase,0===this.health||t?((0===this.health||t)&&this.dieAnimation(),!0):(setTimeout(function(){e._animation.play("monsterDamage")},100),!1)},e.prototype.dieAnimation=function(){cc.find("HealthContainer",this.node).active=!1,this._atkTimer.node.active=!1,this._animation.play("monsterDead");var t=300*Math.random()+200,e=t;this.node.x<0&&(e=-1*t);var o=cc.v2(e,300);cc.tween(this.node).to(.8,{opacity:0,position:o,angle:1080}).removeSelf().start()},e.prototype.startInsaneTimer=function(){this._atkTimer.node.active=!0,this._atkTimerCur=this._atkTimerBase,this.schedule(this._insaneModeTimer,0)},e.prototype._insaneModeTimer=function(t){this._atkTimerCur-=t,this._atkTimer.progress=this._atkTimerCur/this._atkTimerBase,this._atkTimerCur<=0&&(this._atkTimerCur=this._atkTimerBase,this._attack())},e.prototype._attack=function(){this.gameManager.playerDamaged()},e.prototype.pauseTimer=function(){this.unschedule(this._insaneModeTimer)},e.prototype.onAnimFinishedCallback=function(){this._animation.play("monsterIdle")},e=i([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{"./GameManager":"GameManager"}],Player:[function(t,e,o){"use strict";cc._RF.push(e,"c66e4G3AcpI24NSYsCKjmH8","Player");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./GameManager"),c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._animation=null,e._animationName=["character_idle","character_attack_01","character_attack_02","character_attack_03","character_damaged"],e._baseScale=1,e._currentAtkAnim=1,e._gameManager=null,e._atkAnimationInterval=.2,e._actionTimeout=-1,e}return n(e,t),e.prototype.onLoad=function(){this._animation=cc.find("character",this.node).getComponent(cc.Animation),this._animation.on("finished",this.onAnimFinishedCallback,this),this._gameManager=cc.find("GameManager").getComponent(r.default)},e.prototype.leftAction=function(){this.node.scaleX=-1*this._baseScale,this._playAtkAnim()},e.prototype.rightAction=function(){this.node.scaleX=this._baseScale,this._playAtkAnim()},e.prototype._playAtkAnim=function(){clearTimeout(this._actionTimeout),this._actionTimeout=-1,this._animation.play(this._animationName[this._currentAtkAnim]).speed=.1/this._gameManager.actionInterval,this._currentAtkAnim++,this._currentAtkAnim>3&&(this._currentAtkAnim=1)},e.prototype.onAnimFinishedCallback=function(){var t=this;this._animation.play(this._animationName[0]),this.scheduleOnce(function(){t._currentAtkAnim=1,t._actionTimeout=-1},1e3*this._gameManager.actionInterval)},e.prototype.damaged=function(t){var e=this;setTimeout(function(){e.node.scaleX=t?-1*e._baseScale:e._baseScale;e._animation.play(e._animationName[4]);e._currentAtkAnim=1},150)},e=i([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{"./GameManager":"GameManager"}],ScoreUIController:[function(t,e,o){"use strict";cc._RF.push(e,"ed0da5VlfBPErq9rB13bhFB","ScoreUIController");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./GameManager"),c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._gameManager=null,e._lbScore=null,e._lbCombo=null,e._lbLife=null,e._lbTotal=null,e._btnMain=null,e._btnRetry=null,e._targetLabel=null,e._counter=20,e._countingTime=1,e._score=0,e._combo=0,e}return n(e,t),e.prototype.onLoad=function(){this._gameManager=cc.find("GameManager").getComponent(r.default),this._lbScore=cc.find("lbScore2",this.node).getComponent(cc.Label),this._lbCombo=cc.find("lbCombo2",this.node).getComponent(cc.Label),this._lbLife=cc.find("lbLife2",this.node).getComponent(cc.Label),this._lbTotal=cc.find("lbTotal2",this.node).getComponent(cc.Label),this._btnMain=cc.find("btnMain",this.node),this._btnRetry=cc.find("btnRetry",this.node),this._btnMain.active=!1,this._btnRetry.active=!1,this._btnMain.on("click",this._gameManager.showMain,this._gameManager),this._btnRetry.on("click",this._gameManager.restartGame,this._gameManager),this.node.on("click",this._skipCounting,this)},e.prototype.showResult=function(t,e){var o=this;this._score=t,this._combo=e,this._lbScore.string="",this._lbCombo.string="",this._lbLife.string="",this._lbTotal.string="",cc.tween(this.node).call(function(){o._labelCounting(o._lbScore,0,t),o._labelCounting(o._lbTotal,0,t)}).delay(this._countingTime+.5).call(function(){o._labelCounting(o._lbCombo,0,e),o._labelCounting(o._lbTotal,t,t+e)}).delay(this._countingTime+.5).call(function(){o._showRetry()}).start()},e.prototype._labelCounting=function(t,e,o){var n=this._countingTime/this._counter,i=e,r=(o-e)/this._counter;t.schedule(function(){i+=r,t.string=Math.round(i).toString()},n,this._counter-1)},e.prototype._skipCounting=function(){cc.director.getActionManager().removeAllActionsFromTarget(this.node,!0),this._lbScore.unscheduleAllCallbacks(),this._lbLife.unscheduleAllCallbacks(),this._lbCombo.unscheduleAllCallbacks(),this._lbTotal.unscheduleAllCallbacks(),this._lbScore.string=this._score.toString(),this._lbCombo.string=this._combo.toString(),this._lbTotal.string=(this._score+this._combo).toString(),this._showRetry()},e.prototype._showRetry=function(){this._btnMain.active=!0,this._btnRetry.active=!0},e=i([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{"./GameManager":"GameManager"}],SoundController:[function(t,e,o){"use strict";cc._RF.push(e,"4f319vcB+hEpoGCnjNf0dD4","SoundController");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,a=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audioClipArray=[],e._current=-1,e._currentEffect=-1,e._currentEffectName=-1,e}return n(e,t),e.prototype.onLoad=function(){cc.game.addPersistRootNode(this.node)},e.prototype.initializeSound=function(){},e.prototype.initSoundSetting=function(){var t=cc.find("LocalStorage").getComponent("LocalStorage"),e=t.getItem("effect"),o=t.getItem("music");cc.log("SoundController.ts(51)",e,o),!1===e?cc.audioEngine.setEffectsVolume(0):cc.audioEngine.setEffectsVolume(1),!1===o?cc.audioEngine.setMusicVolume(0):cc.audioEngine.setMusicVolume(1)},e.prototype.playMusic=function(t,e,o){var n=!!e;return this.audioClipArray[t]instanceof cc.AudioClip?(this._current=cc.audioEngine.playMusic(this.audioClipArray[t],n),"function"==typeof o&&cc.audioEngine.setFinishCallback(this._current,o),this._current):(cc.error("SoundController.ts(64)","play music fail ",t),-1)},e.prototype.stopMusic=function(){cc.audioEngine.stopEffect(this._current),this._current=-1},e.prototype.playEffect=function(t,e,o){var n=this;if(this._currentEffectName===t)return-1;this._currentEffectName=t,setTimeout(function(){n._currentEffectName=-1},1);var i=!!e;return this.audioClipArray[t]instanceof cc.AudioClip?(this._currentEffect=cc.audioEngine.playEffect(this.audioClipArray[t],i),"function"==typeof o&&cc.audioEngine.setFinishCallback(this._currentEffect,o),this._currentEffect):(cc.error("SoundController.ts(64)","play effect fail ",t),-1)},e.prototype.stopEffect=function(t){var e=t||this._currentEffect;cc.audioEngine.stopEffect(e),this._currentEffect=-1},e.prototype.setMusicVolume=function(t){cc.audioEngine.setMusicVolume(t)},e.prototype.setEffectVolume=function(t){cc.audioEngine.setEffectsVolume(t)},i([a(cc.AudioClip)],e.prototype,"audioClipArray",void 0),e=i([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{}]},{},["GameManager","GameUIController","InputManager","LocalStorage","MenuUIController","Monster","Player","ScoreUIController","SoundController"]);